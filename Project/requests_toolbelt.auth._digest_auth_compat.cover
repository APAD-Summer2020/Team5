    1: """Provide a compatibility layer for requests.auth.HTTPDigestAuth."""
    1: import requests
       
       
    2: class _ThreadingDescriptor(object):
    1:     def __init__(self, prop, default):
    6:         self.prop = prop
    6:         self.default = default
       
    1:     def __get__(self, obj, objtype=None):
               return getattr(obj._thread_local, self.prop, self.default)
       
    1:     def __set__(self, obj, value):
               setattr(obj._thread_local, self.prop, value)
       
       
    2: class _HTTPDigestAuth(requests.auth.HTTPDigestAuth):
    1:     init = _ThreadingDescriptor('init', True)
    1:     last_nonce = _ThreadingDescriptor('last_nonce', '')
    1:     nonce_count = _ThreadingDescriptor('nonce_count', 0)
    1:     chal = _ThreadingDescriptor('chal', {})
    1:     pos = _ThreadingDescriptor('pos', None)
    1:     num_401_calls = _ThreadingDescriptor('num_401_calls', 1)
       
       
    1: if requests.__build__ < 0x020800:
           HTTPDigestAuth = requests.auth.HTTPDigestAuth
       else:
    1:     HTTPDigestAuth = _HTTPDigestAuth
